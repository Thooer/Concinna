**优化建议**
- 命名与边界
  - 保留 `Prm.IO:FileSystem` 作为“OS文件句柄/物理访问”模块，不再新增 `Prm.FileSystem` 名称，避免重构成本暴增。
  - 将纯字符串路径算法从 `Prm.File` 迁移至 `Cap.Path`，并在过渡期为 `Prm.File.FilePath` 提供到 `Cap.Path` 的薄包装或类型别名，便于逐步替换。
  - 明确 `Cap.Stream` 与 `Cap.Streaming` 的职责和命名，建议：
    - `Cap.Stream`：Reader/Writer/Seeker 接口与缓冲/字节序逻辑
    - 将当前的 `Cap.Streaming` 更名为 `Cap.Pipeline` 或 `Cap.CodecPipeline`（可选），以避免“流/流式”二义性
- 异步 IO 的归位
  - 将 `Prm.IO:FileSystem` 中的 `ReadAsync/WriteAsync/CancelAsync/CheckAsync` 下沉到能力层，建议不新建“平行的IOCP引擎”，而是：
    - 在 `Cap.AsyncIO` 定义统一请求模型与适配器
    - `Cap.AsyncIO` 复用 `Cap.Concurrency` 已有的 IOCP 端口管理与事件轮询（避免重复）
    - `Prm.IO:FileSystem` 仅提供“注册/解绑句柄到 IOCP”的薄层接口或交由 `Cap.AsyncIO` 处理
- Window/HID 解耦的落地模型
  - 保持 `Prm.Window` 的 `WndProcCallback` 和 `ProcessOneMessage` 作为事件泵源（Primitive/Window/API/Ops.ixx:9,20），并新增“原始事件转发”回调或队列类型，确保键鼠 `WM_INPUT`/`WM_KEYDOWN` 走到更高层的事件流。
  - 规定依赖为“运行时注入而非编译期”：`Prm.HID` 不 `import Prm.Window`，只在初始化时接收 `HWND` 或线程句柄/事件源，或订阅一个 `RawEventQueue`。在文档中改为“依赖关系：运行时句柄注入，不形成编译期依赖”。

**落地步骤（建议分阶段）**
- 第 1 阶段：API 对齐与别名过渡
  - 在 `Cap.Path` 新增路径字符串算法接口，与 `Prm.File.FilePath` 保持函数签名一致
  - 为 `Prm.File.FilePath` 提供到 `Cap.Path` 的别名转发，开始迁移调用点
- 第 2 阶段：异步 IO 收敛
  - 在 `Cap.AsyncIO` 定义请求、完成、取消等接口，并复用 `Cap.Concurrency` 的 IOCP 端口管理与轮询
  - 从 `Prm.IO:FileSystem` 移除 `ReadAsync/WriteAsync/...`，改为通过 `Cap.AsyncIO` 完成
- 第 3 阶段：窗口/输入事件桥接
  - 在 `Prm.Window` 增加“原始事件转发”机制（如 `SetRawEventSink(...)`），并限定只处理窗口相关消息，其他输入消息进入事件队列
  - 为 `Prm.HID` 增加订阅接口，按队列更新 `KeyboardState/MouseState`；Gamepad 继续通过 XInput 轮询

**你现在可以直接做的最小改动（文档层）**
- 修正文档中的依赖表述，将 `Prm.HID` 的依赖改为“运行时句柄（HWND/线程）注入，不形成编译期依赖”，并删除“依赖 `Prm.Window`”的字样，避免和“解耦”目标冲突。
- 明确 `Cap.Stream` 与 `Cap.Streaming` 的语义与命名差异，避免术语撞车。
- 将“重命名 `Prm.FileSystem`”的建议调整为“保留现有 `Prm.IO:FileSystem`，只迁移职责（异步下沉至能力层；路径字符串进入 `Cap.Path`）”，降低重构风险。

**参考位置**
- `Primitive/Window/API/Ops.ixx:9` `Window::Create(...)` 带 `WndProcCallback`，可作为事件桥接点
- `Primitive/Window/API/Ops.ixx:20` `Window::ProcessOneMessage(...)` 消息泵
- `Primitive/Input/API/Input.ixx:9` `Input::Initialize/Shutdown`，当前仅存在手柄接口，键鼠可按事件队列接入
- `Primitive/IO/API/FileSystem.ixx:21–40` `File` 的同步/异步 API 与 `Path` 的 OS 操作，需与文档建议对齐
- `Primitive/File/API/File.ixx:7–12` 纯路径字符串算法，适合作为 `Cap.Path` 的源
- `Capability/Concurrency/Backends/Core/Driver.cppm:98–114,172–185` IOCP 轮询与注册，建议被 `Cap.AsyncIO` 复用而非重复
